 sudo docker compose exec backend poetry run alembic upgrade head                                          10:55 
WARN[0000] /home/luxio/Art-NewsLetter-Chile/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
Skipping virtualenv creation, as specified in config file.
INFO  [alembic.runtime.migration] Context impl PostgresqlImpl.
INFO  [alembic.runtime.migration] Will assume transactional DDL.
INFO  [alembic.runtime.migration] Running upgrade  -> 0001_initial, initial_tables
INFO  [alembic.runtime.migration] Running upgrade 0001_initial -> 0002_add_events, add_events
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.DuplicateObject: type "eventcategory" already exists


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/bin/alembic", line 8, in <module>
    sys.exit(main())
             ^^^^^^
  File "/usr/local/lib/python3.11/site-packages/alembic/config.py", line 1033, in main
    CommandLine(prog=prog).main(argv=argv)
  File "/usr/local/lib/python3.11/site-packages/alembic/config.py", line 1023, in main
    self.run_cmd(cfg, options)
  File "/usr/local/lib/python3.11/site-packages/alembic/config.py", line 957, in run_cmd
    fn(
  File "/usr/local/lib/python3.11/site-packages/alembic/command.py", line 483, in upgrade
    script.run_env()
  File "/usr/local/lib/python3.11/site-packages/alembic/script/base.py", line 545, in run_env
    util.load_python_file(self.dir, "env.py")
  File "/usr/local/lib/python3.11/site-packages/alembic/util/pyfiles.py", line 116, in load_python_file
    module = load_module_py(module_id, path)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/alembic/util/pyfiles.py", line 136, in load_module_py
    spec.loader.exec_module(module)  # type: ignore
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/app/alembic/env.py", line 87, in <module>
    run_migrations_online()
  File "/app/alembic/env.py", line 81, in run_migrations_online
    context.run_migrations()
  File "<string>", line 8, in run_migrations
  File "/usr/local/lib/python3.11/site-packages/alembic/runtime/environment.py", line 946, in run_migrations
    self.get_context().run_migrations(**kw)
  File "/usr/local/lib/python3.11/site-packages/alembic/runtime/migration.py", line 627, in run_migrations
    step.migration_fn(**kw)
  File "/app/alembic/versions/0002_add_events.py", line 32, in upgrade
    op.create_table('event',
  File "<string>", line 8, in create_table
  File "<string>", line 3, in create_table
  File "/usr/local/lib/python3.11/site-packages/alembic/operations/ops.py", line 1332, in create_table
    return operations.invoke(op)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/alembic/operations/base.py", line 454, in invoke
    return fn(self, operation)
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/alembic/operations/toimpl.py", line 135, in create_table
    operations.impl.create_table(table, **kw)
  File "/usr/local/lib/python3.11/site-packages/alembic/ddl/impl.py", line 420, in create_table
    table.dispatch.before_create(
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/event/attr.py", line 515, in __call__
    fn(*args, **kw)
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/util/langhelpers.py", line 937, in __call__
    return getattr(self.target, self.name)(*arg, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/sqltypes.py", line 1152, in _on_table_create
    t._on_table_create(target, bind, **kw)
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/named_types.py", line 113, in _on_table_create
    self.create(bind=bind, checkfirst=checkfirst)
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/named_types.py", line 369, in create
    super().create(bind, checkfirst=checkfirst)
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/named_types.py", line 56, in create
    bind._run_ddl_visitor(self.DDLGenerator, self, checkfirst=checkfirst)
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2467, in _run_ddl_visitor
    ).traverse_single(element)
      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/visitors.py", line 661, in traverse_single
    return meth(obj, **kw)
           ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/dialects/postgresql/named_types.py", line 186, in visit_enum
    self.connection.execute(CreateEnumType(enum))
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/sql/ddl.py", line 187, in _execute_on_connection
    return connection._execute_ddl(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1530, in _execute_ddl
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.DuplicateObject) type "eventcategory" already exists

[SQL: CREATE TYPE eventcategory AS ENUM ('ART', 'MUSIC', 'THEATER', 'LITERATURE', 'CINEMA', 'DANCE', 'OTHER')]
(Background on this error at: https://sqlalche.me/e/20/f405)

╭─ …/Art-NewsLetter-Chile   main !? 
╰─❯ sudo docker ps -a                                                                                         10:55 
CONTAINER ID   IMAGE                           COMMAND                  CREATED          STATUS                      PORTS                                         NAMES
4c49a36a1e27   art-newsletter-chile-frontend   "docker-entrypoint.s…"   16 minutes ago   Exited (1) 2 minutes ago                                                  art-newsletter-chile-frontend-1
9795a5e02673   art-newsletter-chile-backend    "uvicorn app.main:ap…"   16 minutes ago   Up 2 minutes                0.0.0.0:8000->8000/tcp, [::]:8000->8000/tcp   art-newsletter-chile-backend-1
73f3baeb4a67   postgres:15-alpine              "docker-entrypoint.s…"   16 minutes ago   Up 2 minutes                0.0.0.0:5432->5432/tcp, [::]:5432->5432/tcp   art-newsletter-chile-db-1
d362291a57c6   redis:7-alpine                  "docker-entrypoint.s…"   16 minutes ago   Up 2 minutes                0.0.0.0:6379->6379/tcp, [::]:6379->6379/tcp   art-newsletter-chile-redis-1
dd52ff4f767e   axllent/mailpit                 "/mailpit"               16 minutes ago   Exited (1) 2 minutes ago                                                  art-newsletter-chile-mailpit-1
aeafdc61285b   bab2e7a59aae                    "/bin/sh -c 'poetry …"   18 minutes ago   Exited (1) 18 minutes ago                                                 priceless_pascal
02d1a51ca34b   91ceb63bb43b                    "/bin/sh -c 'poetry …"   20 minutes ago   Exited (1) 20 minutes ago                                                 affectionate_neumann
fe3069768d2c   91ceb63bb43b                    "/bin/sh -c 'poetry …"   21 minutes ago   Exited (1) 21 minutes ago                                                 naughty_jang
